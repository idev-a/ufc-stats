(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70c0a7c7"],{"42a4":function(t,e,s){},"7e58":function(t,e,s){},"8ed3":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"pa-0",attrs:{id:"contest",fluid:"",tag:"section"}},[s("dialog-drag",{attrs:{id:"movingSelectionDlg",options:{buttonClose:!1,left:t.lastLeft,dragCursor:"move",zIndex:5}},on:{"drag-end":t.dragEnd}},[s("v-card",{staticClass:"grey lighten-4 ma-0 pa-0",attrs:{loading:t.loading}},[t.event?s("v-card-title",{staticClass:"popup-header grab text-center ustify-center font-weight-medium mb-md-3"},[s("div",[s("div",{staticClass:"grab"},[t._v(t._s(this.event.name))]),s("div",{staticClass:"grab subtitle-2"},[t._v(t._s(t._f("beautifyDate")(this.event.date)))]),s("div",{staticClass:"grab overline"},[t._v("SQUAD SIZE: "),s("b",[t._v(t._s(t.squadSize))])])])]):t._e(),s("v-card-text",{staticClass:"pb-0"},[s("v-virtual-scroll",{key:t.key,attrs:{items:t.bouts,"item-height":45,height:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[s("v-btn-toggle",{key:n.id,staticClass:"justify-space-between",attrs:{dense:"",multiple:"",tile:""},on:{change:t.changeContests},model:{value:t.contests[n.id],callback:function(e){t.$set(t.contests,n.id,e)},expression:"contests[item.id]"}},[s("v-btn",{attrs:{value:n.fighter1,small:"",width:112}},[t._v(" "+t._s(t._fighter(n.fighter1).name)+" ")]),s("v-btn",{attrs:{value:n.fighter2,small:"",width:112}},[t._v(" "+t._s(t._fighter(n.fighter2).name)+" ")])],1)]}}])}),s("div",{staticClass:"d-flex justify-center w-100"},[s("v-btn",{staticClass:"success mt-2 mb-2",attrs:{disabled:t.submitDisabled,small:""},on:{click:t.submit}},[t._v("Submit")]),s("v-btn",{staticClass:"grey darken-2 mt-2 mb-2",attrs:{disabled:!t.squadSize,small:""},on:{click:t.clearSelection}},[t._v("Clear")])],1)],1)],1)],1),s("v-snackbar",{attrs:{timeout:3e3,color:t.snackbar.status},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[s("v-btn",t._b({attrs:{dark:"",text:""},on:{click:function(e){t.snackbar.snack=!1}}},"v-btn",n,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar.snack,callback:function(e){t.$set(t.snackbar,"snack",e)},expression:"snackbar.snack"}},[t._v(" "+t._s(t.snackbar.message)+" ")])],1)},i=[],a=(s("4de4"),s("d81d"),s("96cf"),s("1da1")),r=s("5530"),o=s("a358"),c=s("e0eb"),l=s("2f62"),u=s("db2a"),h=s.n(u),d={name:"Selection",components:{DialogDrag:h.a},data:function(){return{dlg:!0,loading:!1,bouts:[],event:null,fighters:[],selectedItem:-1,contests:{},key:1,snackbar:{snack:!1,message:"",status:"success"},toggle_multiple:[0,1],squadSize:0}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(l["d"])(["lastLeft"])),Object(l["d"])("auth",["authUser"])),Object(l["b"])("auth",["isAuthenticated"])),{},{bgHeight:function(){return this.$vuetify.breakpoint.height-147},submitDisabled:function(){return this.loading||!this.event||this.bouts.length<1},leftMargin:function(){return this.$vuetify.breakpoint.mobile?5:50}}),filters:{beautifyDate:c["a"]},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.getFighters();case 3:return e.next=5,t.getLatestBouts();case 5:t.preselectFighters(),t.changeContests(),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},methods:{preselectFighters:function(){var t=this;this.bouts.map((function(e){t.contests[e.id]=[],e.survivors&&(t.contests[e.id]=e.survivors)})),this.key++},getLatestBouts:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getLatestEvent();case 2:s=e.sent,n=s.data,t.bouts=n.bouts,t.event=n.event;case 6:case"end":return e.stop()}}),e)})))()},getFighters:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getFighters();case 2:s=e.sent,n=s.data,t.fighters=n.results;case 5:case"end":return e.stop()}}),e)})))()},_fighter:function(t){var e=this.fighters.filter((function(e){return e.id==t}));return e[0]},submit:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,n,i,a,c,l,u,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isAuthenticated){e.next=3;break}return t.$store.commit("auth/showLoginDlg"),e.abrupt("return");case 3:for(a in s=t.bouts[0].event,n={entry:{event:s,user:t.authUser.pk||t.authUser.id},selections:[]},i=!1,t.contests)c=t.contests[a],c.length&&(i=!0),n.selections.push({bout:a,survivor1:(null===c||void 0===c?void 0:c[0])||null,survivor2:(null===c||void 0===c?void 0:c[1])||null});if(i){e.next=10;break}return t.snackbar={snack:!0,message:"Please select at least one entry to submit",status:"dark"},e.abrupt("return");case 10:return e.next=12,o["a"].createEntries(n);case 12:l=e.sent,u=l.data,t.snackbar=Object(r["a"])(Object(r["a"])({},u),{},{snack:!0}),"success"==u.status&&(h=t,setTimeout((function(){h.$router.push("Contest")}),1200));case 16:case"end":return e.stop()}}),e)})))()},clearSelection:function(){this.contests={},this.squadSize=0},changeContests:function(){for(var t in this.squadSize=0,this.contests){var e=this.contests[t];this.squadSize+=e.length}},dragEnd:function(t){this.$store.commit("SET_LASTLEFT",t.left)}}},g=d,b=(s("b331"),s("2877")),v=s("6544"),f=s.n(v),m=s("8336"),p=(s("7e58"),s("604c")),_=p["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},computed:{classes:function(){return p["a"].options.computed.classes.call(this)}},methods:{genData:p["a"].options.methods.genData}}),k=s("a9ad"),C=s("58df"),S=Object(C["a"])(_,k["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(r["a"])(Object(r["a"])({},_.options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var t=this.setTextColor(this.color,Object(r["a"])({},_.options.methods.genData.call(this)));return this.group?t:this.setBackgroundColor(this.backgroundColor,t)}}}),y=s("b0af"),w=s("99d9"),x=s("a523"),j=s("2db4"),O=(s("fb6a"),s("a9e3"),s("96a9"),s("24b2")),T=s("f977"),D=s("80d2"),L=O["a"].extend({name:"v-virtual-scroll",directives:{Scroll:T["b"]},props:{bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:function(){return[]}}},data:function(){return{first:0,last:0,scrollTop:0}},computed:{__bench:function(){return parseInt(this.bench,10)},__itemHeight:function(){return parseInt(this.itemHeight,10)},firstToRender:function(){return Math.max(0,this.first-this.__bench)},lastToRender:function(){return Math.min(this.items.length,this.last+this.__bench)}},watch:{height:"onScroll",itemHeight:"onScroll"},mounted:function(){this.last=this.getLast(0)},methods:{getChildren:function(){return this.items.slice(this.firstToRender,this.lastToRender).map(this.genChild)},genChild:function(t,e){e+=this.firstToRender;var s=Object(D["g"])(e*this.__itemHeight);return this.$createElement("div",{staticClass:"v-virtual-scroll__item",style:{top:s},key:e},Object(D["r"])(this,"default",{index:e,item:t}))},getFirst:function(){return Math.floor(this.scrollTop/this.__itemHeight)},getLast:function(t){var e=parseInt(this.height||0,10)||this.$el.clientHeight;return t+Math.ceil(e/this.__itemHeight)},onScroll:function(){this.scrollTop=this.$el.scrollTop,this.first=this.getFirst(),this.last=this.getLast(this.first)}},render:function(t){var e=t("div",{staticClass:"v-virtual-scroll__container",style:{height:Object(D["g"])(this.items.length*this.__itemHeight)}},this.getChildren());return t("div",{staticClass:"v-virtual-scroll",style:this.measurableStyles,directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}],on:this.$listeners},[e])}}),R=Object(b["a"])(g,n,i,!1,null,null,null);e["default"]=R.exports;f()(R,{VBtn:m["a"],VBtnToggle:S,VCard:y["a"],VCardText:w["b"],VCardTitle:w["c"],VContainer:x["a"],VSnackbar:j["a"],VVirtualScroll:L})},"96a9":function(t,e,s){},b331:function(t,e,s){"use strict";s("42a4")},f977:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var n=s("53ca");function i(t,e){var s=e.modifiers||{},i=s.self,a=void 0!==i&&i,r=e.value,o="object"===Object(n["a"])(r)&&r.options||{passive:!0},c="function"===typeof r||"handleEvent"in r?r:r.handler,l=a?t:e.arg?document.querySelector(e.arg):window;l&&(l.addEventListener("scroll",c,o),t._onScroll={handler:c,options:o,target:a?void 0:l})}function a(t){if(t._onScroll){var e=t._onScroll,s=e.handler,n=e.options,i=e.target,a=void 0===i?t:i;a.removeEventListener("scroll",s,n),delete t._onScroll}}var r={inserted:i,unbind:a};e["b"]=r}}]);
//# sourceMappingURL=chunk-70c0a7c7.70ff84ec.js.map