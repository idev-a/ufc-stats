(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f9c8254"],{1710:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-1",attrs:{id:"contest",fluid:"",tag:"section"}},[t.$vuetify.breakpoint.mobile?n("div",{staticClass:"w-100"},[n("selection")],1):n("dialog-drag",{attrs:{id:"movingSelectionDlg",options:{buttonClose:!1,left:t.lastLeft,dragCursor:"move",zIndex:5,width:t._width}},on:{"drag-end":t.dragEnd}},[n("selection")],1)],1)},i=[],a=n("5530"),r=n("2f62"),o=n("db2a"),c=n.n(o),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",{staticClass:"grey lighten-4 ma-0 pa-0",attrs:{loading:t.loading}},[t.event?n("v-card-title",{staticClass:"popup-header grab text-center ustify-center font-weight-medium mb-md-3"},[n("div",[n("div",{staticClass:"grab"},[t._v(t._s(this.event.name))]),n("div",{staticClass:"grab subtitle-2"},[n("span",[t._v(t._s(t._f("beautifyDate")(this.event.date)))]),t.eventStarted?n("span",{staticClass:"red--text lighten-1 h6"},[t._v("(Started)")]):t._e(),t.countable?n("flip-countdown",{attrs:{deadline:t.deadline2},on:{stopTimer:t.disableSelection}}):t._e()],1),n("div",{staticClass:"grab overline"},[t._v("SQUAD SIZE: "),n("b",[t._v(t._s(t.squadSize))])])])]):t._e(),n("v-card-text",{staticClass:"pb-0"},[n("v-virtual-scroll",{key:t.key,attrs:{items:t.bouts,"item-height":45,height:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item;return[n("v-btn-toggle",{key:s.id,staticClass:"justify-space-between",attrs:{dense:"",multiple:"",tile:""},on:{change:t.changeContests},model:{value:t.contests[s.id],callback:function(e){t.$set(t.contests,s.id,e)},expression:"contests[item.id]"}},[n("v-btn",{attrs:{value:s.fighter1,disabled:t.eventStarted,small:"",width:152}},[t._v(" "+t._s(t._fighter(s.fighter1).name)+" ")]),n("v-btn",{attrs:{value:s.fighter2,disabled:t.eventStarted,small:"",width:152}},[t._v(" "+t._s(t._fighter(s.fighter2).name)+" ")])],1)]}}])}),n("div",{staticClass:"d-flex justify-center w-100"},[n("v-btn",{staticClass:"success mt-2 mb-2 mr-2",attrs:{disabled:t.submitDisabled,small:""},on:{click:t.submit}},[t._v("Submit")]),n("v-btn",{staticClass:"grey darken-2 mt-2 mb-2",attrs:{disabled:!t.squadSize||t.event.started,small:""},on:{click:t.clearSelection}},[t._v("Clear")])],1)],1)],1)],1)},u=[],d=(n("4de4"),n("d81d"),n("96cf"),n("1da1")),h=n("a358"),f=n("e0eb"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flip-clock"},[t._l(t.timeData,(function(e){return[n("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"data.show"}],key:e.label,staticClass:"flip-clock__piece",attrs:{id:e.elementId}},[n("span",{staticClass:"flip-clock__card flip-card"},[n("b",{staticClass:"flip-card__top"},[t._v(t._s(t._f("twoDigits")(e.current)))]),n("b",{staticClass:"flip-card__bottom",attrs:{"data-value":t._f("twoDigits")(e.current)}}),n("b",{staticClass:"flip-card__back",attrs:{"data-value":t._f("twoDigits")(e.previous)}}),n("b",{staticClass:"flip-card__back-bottom",attrs:{"data-value":t._f("twoDigits")(e.previous)}})]),n("span",{staticClass:"flip-clock__slot"},[t._v(t._s(e.label))])])]}))],2)},m=[],v=(n("caad"),n("b65f"),n("d3b7"),n("ac1f"),n("25f0"),n("2532"),n("5319"),n("b85c")),g=null,b=n("c64e"),w={name:"flipCountdown",props:{deadline:{type:String},stop:{type:Boolean},showDays:{type:Boolean,required:!1,default:!0},showHours:{type:Boolean,required:!1,default:!0},showMinutes:{type:Boolean,required:!1,default:!0},showSeconds:{type:Boolean,required:!1,default:!0},labels:{type:Object,required:!1,default:function(){return{days:"Days",hours:"Hours",minutes:"Mins",seconds:"Secs"}}}},data:function(){var t=b();return{now:Math.trunc((new Date).getTime()/1e3),date:null,interval:null,diff:0,show:!1,timeData:[{current:0,previous:0,label:this.labels.days,elementId:"flip-card-days-"+t,show:this.showDays},{current:0,previous:0,label:this.labels.hours,elementId:"flip-card-hours-"+t,show:this.showHours},{current:0,previous:0,label:this.labels.minutes,elementId:"flip-card-minutes-"+t,show:this.showMinutes},{current:0,previous:0,label:this.labels.seconds,elementId:"flip-card-seconds-"+t,show:this.showSeconds}]}},created:function(){var t=this;if(!this.deadline)throw new Error("Missing props 'deadline'");var e=this.deadline;if(this.date=Math.trunc(Date.parse(e.replace(/-/g,"/"))/1e3),!this.date)throw new Error("Invalid props value, correct the 'deadline'");this.interval=setInterval((function(){t.now=Math.trunc((new Date).getTime()/1e3)}),1e3)},mounted:function(){0!==this.diff&&(this.show=!0)},computed:{seconds:function(){return Math.trunc(this.diff)%60},minutes:function(){return Math.trunc(this.diff/60)%60},hours:function(){return Math.trunc(this.diff/60/60)%24},days:function(){return Math.trunc(this.diff/60/60/24)}},watch:{deadline:function(t,e){var n=this.deadline;if(this.date=Math.trunc(Date.parse(n.replace(/-/g,"/"))/1e3),!this.date)throw new Error("Invalid props value, correct the 'deadline'")},now:function(t){this.diff=this.date-this.now,this.diff<=0||this.stop?(this.diff=0,this.updateTime(3,0)):this.updateAllCards()},diff:function(t){0===t&&(this.$emit("timeElapsed"),this.updateAllCards())}},filters:{twoDigits:function(t){return t.toString().length<=1?"0"+t.toString():t.toString()}},methods:{updateAllCards:function(){this.updateTime(0,this.days),this.updateTime(1,this.hours),this.updateTime(2,this.minutes),this.updateTime(3,this.seconds),0==this.days&&0==this.hours&&0==this.minutes&&0==this.seconds&&this.$emit("stopTimer")},updateTime:function(t,e){if(!(t>=this.timeData.length||void 0===e)){window["requestAnimationFrame"]&&(this.frame=requestAnimationFrame(this.updateTime.bind(this)));var n=this.timeData[t],s=e<0?0:e,i=document.querySelector("#".concat(n.elementId));if(s!==n.current&&(n.previous=n.current,n.current=s,i&&(i.classList.remove("flip"),i.offsetWidth,i.classList.add("flip")),0===t)){var a=i.querySelectorAll("span b");if(a){var r,o=Object(v["a"])(a);try{for(o.s();!(r=o.n()).done;){var c=r.value,l=c.classList[0];if(e/1e3>=1){if(!l.includes("-4digits")){var u=l+"-4digits";c.classList.add(u),c.classList.remove(l)}}else if(l.includes("-4digits")){var d=l.replace("-4digits","");c.classList.add(d),c.classList.remove(l)}}}catch(h){o.e(h)}finally{o.f()}}}}}},beforeDestroy:function(){window["cancelAnimationFrame"]&&cancelAnimationFrame(this.frame)},destroyed:function(){clearInterval(g)}},_=w,y=(n("5f9c"),n("2877")),C=Object(y["a"])(_,p,m,!1,null,"02717982",null),S=C.exports,k="YYYY-MM-DD HH:mm:ss",j={name:"Selection",components:{FlipCountdown:S},watch:{event:{handler:function(t){t&&this.startCountDown(t)},deep:!0}},data:function(){return{deadline2:"",dlg:!0,loading:!1,countdownEnd:!1,bouts:[],fighters:[],selectedItem:-1,contests:{},key:1,snackbar:{snack:!1,message:"",status:"success"},toggle_multiple:[0,1],squadSize:0,cntdownInstance:null}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["d"])(["socket","event"])),Object(r["d"])("auth",["authUser"])),Object(r["b"])("auth",["isAuthenticated"])),{},{submitDisabled:function(){return this.loading||!this.event||this.bouts.length<1||this.event.started},leftMargin:function(){return this.$vuetify.breakpoint.mobile?5:50},eventStarted:function(){return this.event&&"started"==this.event.action||this.countdownEnd},countable:function(){return this.deadline2&&!this.eventStarted}}),filters:{beautifyDate:f["a"]},mounted:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.getFighters();case 3:return e.next=5,t.getLatestBouts();case 5:t.preselectFighters(),t.changeContests(),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},methods:{startCountDown:function(t){this.deadline2=this.$moment("".concat(t.date)).format(k)},preselectFighters:function(){var t=this;this.bouts.map((function(e){t.contests[e.id]=[],e.survivors&&(t.contests[e.id]=e.survivors)})),this.key++},getLatestBouts:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].getLatestEvent();case 2:n=e.sent,s=n.data,t.bouts=s.bouts,t.$store.commit("SET_EVENT",s.event);case 6:case"end":return e.stop()}}),e)})))()},getFighters:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].getFighters();case 2:n=e.sent,s=n.data,t.fighters=s.results;case 5:case"end":return e.stop()}}),e)})))()},_fighter:function(t){var e=this.fighters.filter((function(e){return e.id==t}));return e[0]},submit:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,s,i,r,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isAuthenticated){e.next=3;break}return t.$store.commit("auth/showLoginDlg"),e.abrupt("return");case 3:for(r in n=t.bouts[0].event,s={entry:{event:n,user:t.authUser.pk||t.authUser.id},selections:[]},i=!1,t.contests)o=t.contests[r],o.length&&(i=!0),s.selections.push({bout:r,survivor1:(null===o||void 0===o?void 0:o[0])||null,survivor2:(null===o||void 0===o?void 0:o[1])||null});if(i){e.next=11;break}return t.snackbar={snack:!0,message:"Please select at least one entry to submit",status:"dark"},t.$store.commit("snackbar/setSnack",t.snackbar),e.abrupt("return");case 11:return e.next=13,h["a"].createEntries(s);case 13:c=e.sent,l=c.data,t.snackbar=Object(a["a"])(Object(a["a"])({},l),{},{snack:!0}),t.$store.commit("snackbar/setSnack",t.snackbar),"success"==l.status&&(u=t,setTimeout((function(){u.$router.push("Contest")}),1200));case 18:case"end":return e.stop()}}),e)})))()},clearSelection:function(){this.contests={},this.squadSize=0},changeContests:function(){for(var t in this.squadSize=0,this.contests){var e=this.contests[t];this.squadSize+=e.length}},disableSelection:function(){this.countdownEnd=!0}}},x=j,D=(n("eebf"),n("6544")),O=n.n(D),T=n("8336"),E=(n("7e58"),n("604c")),M=E["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},computed:{classes:function(){return E["a"].options.computed.classes.call(this)}},methods:{genData:E["a"].options.methods.genData}}),L=n("a9ad"),$=n("58df"),q=Object($["a"])(M,L["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},M.options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var t=this.setTextColor(this.color,Object(a["a"])({},M.options.methods.genData.call(this)));return this.group?t:this.setBackgroundColor(this.backgroundColor,t)}}}),A=n("b0af"),B=n("99d9"),I=(n("fb6a"),n("a9e3"),n("96a9"),n("24b2")),R=n("f977"),H=n("80d2"),F=I["a"].extend({name:"v-virtual-scroll",directives:{Scroll:R["b"]},props:{bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:function(){return[]}}},data:function(){return{first:0,last:0,scrollTop:0}},computed:{__bench:function(){return parseInt(this.bench,10)},__itemHeight:function(){return parseInt(this.itemHeight,10)},firstToRender:function(){return Math.max(0,this.first-this.__bench)},lastToRender:function(){return Math.min(this.items.length,this.last+this.__bench)}},watch:{height:"onScroll",itemHeight:"onScroll"},mounted:function(){this.last=this.getLast(0)},methods:{getChildren:function(){return this.items.slice(this.firstToRender,this.lastToRender).map(this.genChild)},genChild:function(t,e){e+=this.firstToRender;var n=Object(H["g"])(e*this.__itemHeight);return this.$createElement("div",{staticClass:"v-virtual-scroll__item",style:{top:n},key:e},Object(H["r"])(this,"default",{index:e,item:t}))},getFirst:function(){return Math.floor(this.scrollTop/this.__itemHeight)},getLast:function(t){var e=parseInt(this.height||0,10)||this.$el.clientHeight;return t+Math.ceil(e/this.__itemHeight)},onScroll:function(){this.scrollTop=this.$el.scrollTop,this.first=this.getFirst(),this.last=this.getLast(this.first)}},render:function(t){var e=t("div",{staticClass:"v-virtual-scroll__container",style:{height:Object(H["g"])(this.items.length*this.__itemHeight)}},this.getChildren());return t("div",{staticClass:"v-virtual-scroll",style:this.measurableStyles,directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}],on:this.$listeners},[e])}}),V=Object(y["a"])(x,l,u,!1,null,null,null),z=V.exports;O()(V,{VBtn:T["a"],VBtnToggle:q,VCard:A["a"],VCardText:B["b"],VCardTitle:B["c"],VVirtualScroll:F});var P={name:"SelectionContainer",components:{DialogDrag:c.a,Selection:z},computed:Object(a["a"])(Object(a["a"])({},Object(r["d"])(["lastLeft"])),{},{_width:function(){return this.$vuetify.breakpoint.mobile?340:370}}),methods:{dragEnd:function(t){this.$store.commit("SET_LASTLEFT",t.left)}}},U=P,N=n("a523"),Y=Object(y["a"])(U,s,i,!1,null,null,null);e["default"]=Y.exports;O()(Y,{VContainer:N["a"]})},2366:function(t,e){for(var n=[],s=0;s<256;++s)n[s]=(s+256).toString(16).substr(1);function i(t,e){var s=e||0,i=n;return[i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]]].join("")}t.exports=i},"5f9c":function(t,e,n){"use strict";n("e830")},"7e58":function(t,e,n){},"96a9":function(t,e,n){},"9fb3":function(t,e,n){},a523:function(t,e,n){"use strict";n("99af"),n("4de4"),n("b64b"),n("2ca0"),n("20f68"),n("4b85"),n("a15b"),n("498a");var s=n("2b0e");function i(t){return s["a"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,n){var s=n.props,i=n.data,a=n.children;i.staticClass="".concat(t," ").concat(i.staticClass||"").trim();var r=i.attrs;if(r){i.attrs={};var o=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}));o.length&&(i.staticClass+=" ".concat(o.join(" ")))}return s.id&&(i.domProps=i.domProps||{},i.domProps.id=s.id),e(s.tag,i,a)}})}var a=n("d9f7");e["a"]=i("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var n,s=e.props,i=e.data,r=e.children,o=i.attrs;return o&&(i.attrs={},n=Object.keys(o).filter((function(t){if("slot"===t)return!1;var e=o[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}))),s.id&&(i.domProps=i.domProps||{},i.domProps.id=s.id),t(s.tag,Object(a["a"])(i,{staticClass:"container",class:Array({"container--fluid":s.fluid}).concat(n||[])}),r)}})},b65f:function(t,e,n){var s=n("23e7"),i=Math.ceil,a=Math.floor;s({target:"Math",stat:!0},{trunc:function(t){return(t>0?a:i)(t)}})},c64e:function(t,e,n){var s=n("e1f4"),i=n("2366");function a(t,e,n){var a=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var o=0;o<16;++o)e[a+o]=r[o];return e||i(r)}t.exports=a},e1f4:function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var s=new Uint8Array(16);t.exports=function(){return n(s),s}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},e830:function(t,e,n){},eebf:function(t,e,n){"use strict";n("9fb3")},f977:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var s=n("53ca");function i(t,e){var n=e.modifiers||{},i=n.self,a=void 0!==i&&i,r=e.value,o="object"===Object(s["a"])(r)&&r.options||{passive:!0},c="function"===typeof r||"handleEvent"in r?r:r.handler,l=a?t:e.arg?document.querySelector(e.arg):window;l&&(l.addEventListener("scroll",c,o),t._onScroll={handler:c,options:o,target:a?void 0:l})}function a(t){if(t._onScroll){var e=t._onScroll,n=e.handler,s=e.options,i=e.target,a=void 0===i?t:i;a.removeEventListener("scroll",n,s),delete t._onScroll}}var r={inserted:i,unbind:a};e["b"]=r}}]);
//# sourceMappingURL=chunk-3f9c8254.9db49e54.js.map